<app-navbar></app-navbar>
<br><br><br>

<body style="display: grid; grid-template-rows: 1fr auto; min-height: 100vh; margin: 0;">
  <main style="padding-top: 40px;">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-md-8">
          <div class="card shadow-lg">
            <div class="card-body">
              <h3 class="text-center mb-4">Mi Perfil </h3>

              <form [formGroup]="perfilForm" (ngSubmit)="onSubmit()">
                <!-- Nombre -->
                <div class="form-group mb-3">
                  <label for="nombre" class="form-label">Nombre completo</label>
                  <input type="text" class="form-control" id="nombre" formControlName="nombre"
                    placeholder="Ej. Juan Pérez">
                  @if (perfilForm.get('nombre')?.invalid && perfilForm.get('nombre')?.touched) {
                  <div class="text-danger">El nombre es requerido (mínimo 3 caracteres).</div>
                  }
                </div>

                <!-- Correo (bloqueado) -->
                <div class="form-group mb-3 disabled">
                  <label class="form-label">Correo electrónico </label>

                  <input type="email" class="form-control" id="email" formControlName="email">
                
                </div>

                <!-- Teléfono -->
                <div class="form-group mb-3">
                  <label for="telefono" class="form-label">Teléfono</label>
                  <input type="tel" class="form-control" id="telefono" formControlName="telefono"
                    placeholder="Ej. 9999-0000">
                  @if (perfilForm.get('telefono')?.invalid && perfilForm.get('telefono')?.touched) {
                  <div class="text-danger">Ingresa un teléfono válido (7–15 dígitos).</div>
                  }
                </div>

                <div class="form-check form-switch mt-2 mb-2">
                  <input class="form-check-input" type="checkbox" id="tipo" [checked]="tipoUsuario === '2'"
                    (change)="onToggleTipo($event)">

                  <label class="form-check-label" for="tipo">
                    Activar modo veterinario : {{ tipoUsuario}}
                  </label>
                </div>

                @if (tipoUsuario === "2") {
                <div class="mt-3">
                  <hr />
                  <h5 class="mb-3">Información veterinaria</h5>

                  <div class="form-group mb-3">
                    <label for="clinica" class="form-label">Clínica asociada</label>
                    <input type="text" class="form-control" id="clinica" formControlName="clinica"
                      placeholder="Ej. VetSalud Centro">
                    @if (perfilForm.get('clinica')?.invalid && perfilForm.get('clinica')?.touched) {
                    <div class="text-danger">La clínica es requerida.</div>
                    }
                  </div>

                  <div class="form-group mb-3">
                    <label for="experiencia" class="form-label">Años de experiencia</label>
                    <input type="number" class="form-control" id="experiencia" formControlName="experiencia"
                      placeholder="Ej. 5">
                    @if (perfilForm.get('experiencia')?.invalid && perfilForm.get('experiencia')?.touched) {
                    <div class="text-danger">Ingresa un número válido (0 o más).</div>
                    }
                  </div>
                </div>
                }

                <div class="text-end mt-3">
                  <button type="submit" class="btn btn-success" [disabled]="perfilForm.invalid">Guardar cambios</button>
                </div>
              </form>

            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <app-footer></app-footer>
</body>